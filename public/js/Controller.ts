/// <reference path="../../typings/phaser.d.ts" />
/// <reference path="./Config.ts" />
/// <reference path="./Loader.ts" />
/// <reference path="./SideBar.ts" />
/// <reference path="./Sim.ts" />
/// <reference path="./scenes/introToPowerSystem/IntroPowerSystem.ts" />
/// <reference path="./scenes/introToPowerSystem/BuildingFloorPlan.ts" />
/// <reference path="./scenes/introToPowerSystem/InputModuleAB.ts" />
/// <reference path="./scenes/introToPowerSystem/InputTransformers.ts" />
/// <reference path="./scenes/introToPowerSystem/StaticFrequencyConverters.ts" />
/// <reference path="./scenes/introToPowerSystem/OutputTransformers.ts" />
/// <reference path="./scenes/introToPowerSystem/Deckhouse.ts" />
/// <reference path="./scenes/introToPowerSystem/RDH.ts" />
/// <reference path="./scenes/normalSystemOperation/FullUtilityIntro.ts" />
/// <reference path="./scenes/normalSystemOperation/CriticalSystemSupport.ts" />
/// <reference path="./scenes/normalSystemOperation/SpyRadar.ts" />
/// <reference path="./scenes/normalSystemOperation/VerticalLaunchingSystem.ts" />
/// <reference path="./scenes/normalSystemOperation/VLSIntercept.ts" />
/// <reference path="./scenes/normalSystemOperation/MVS.ts" />
/// <reference path="./scenes/normalSystemOperation/MVSChallenge.ts" />
/// <reference path="./scenes/normalSystemOperation/MainBus.ts" />
/// <reference path="./scenes/normalSystemOperation/MainBusChallengeA.ts" />
/// <reference path="./scenes/normalSystemOperation/MainBusChallengeB.ts" />
/// <reference path="./scenes/normalSystemOperation/PrimaryBusBreakers.ts" />
/// <reference path="./scenes/normalSystemOperation/GenTieBreakerChallenge.ts" />
/// <reference path="./scenes/normalSystemOperation/DieselGenerators.ts" />
/// <reference path="./scenes/normalSystemOperation/FullUtilityEnd.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/SingleUtililtyFailureIntro.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/UtilityADetail.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/FiftySixtyConverter.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/CSOOW.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/UCCMainFaulted.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/KnowledgeQuestion1.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/M11T21Verify.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/LocateManual.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/Deenergized5060Converter.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/StartSFCDetail.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/ASideRestarted.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/TransferSourceConclusion.ts" />
/// <reference path="./scenes/50_60HzSingleUtilityFailure/TransferSourceConclusion.ts" />
/// <reference path="./scenes/aSide400HzFailure/IntroASideFailure.ts" />
/// <reference path="./scenes/aSide400HzFailure/FourHundredDetailScreen.ts" />
/// <reference path="./scenes/aSide400HzFailure/FourHundredFaultDetected.ts" />
/// <reference path="./scenes/aSide400HzFailure/NotifyCSOOW.ts" />
/// <reference path="./scenes/aSide400HzFailure/LocateHobartManual.ts" />
/// <reference path="./scenes/aSide400HzFailure/SequencingKnowledgeQuestion.ts" />
/// <reference path="./scenes/aSide400HzFailure/SFCKnowledgeQuestion.ts" />
/// <reference path="./scenes/aSide400HzFailure/HobartFaultReadOut.ts" />
/// <reference path="./scenes/aSide400HzFailure/HobartFaultKnowledgeQuestion.ts" />
/// <reference path="./scenes/aSide400HzFailure/FourHundredFaultCleared.ts" />
/// <reference path="./scenes/aSide400HzFailure/FourHundredConclusion.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/DualUtilityFailureIntro.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/FiftySixtyConvertersFail.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/DualUtilityNotifyCSOOW.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/DualUtilityKnowledgeQuestion1.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/OpenBreakerVerification.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/AutomaticRunRequest.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/GeneratorBreakersClose.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/BreakerF11F21Closes.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/BreakerF12F22Closes.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/LocateABBManual.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/InitiateTransferToFullPower.ts" />
/// <reference path="./scenes/50_60HzDualUtilityFailure/DualUtilityFailureConclusion.ts" />
/// CHILLED WATER SYSTEM - NORMAL SYSTEM OPERATION
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerIntro.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/CrucialSystemSupport.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene2.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene3.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/ChilledWaterKnowledgeCheckScene3.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene4.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene5.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/ChilledWaterKnowledgeCheckScene5.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene6.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/ChilledWaterKnowledgeCheckScene6.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene7.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene8.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene9.ts" />
/// <reference path="./scenes/ChilledWaterSystem/normalSystemOperation/WaterChillerScene10.ts" />
/// CHILLED WATER SYSTEM - SINGLE SYSTEM FAILURE
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureIntro.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene1.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene2.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene3.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene4.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene4KnowledgeCheck.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene5.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene5KnowledgeCheck.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene6.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene6KnowledgeCheck.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene7.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene7KnowledgeCheck.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene8.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene10.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene11.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleSystemFailure/SingleSystemFailureScene12.ts" />
/// CHILLED WATER SYSTEM - RETURN PUMP FAILURE
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpIntro.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep1.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep2.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep3.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep4.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep5.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/KnowledgeQuestionStep5.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep6.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/KnowledgeQuestionStep6.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep7.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/KnowledgeQuestionStep7.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep8.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep10.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep11.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep12.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep12B.ts" />
/// <reference path="./scenes/ChilledWaterSystem/ReturnPumpFailure/FailureChilledWaterPumpStep13.ts" />
/// CHILLED WATER SYSTEM - SINGLE FAILURE HOT WATER PUMP
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpIntro.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep1.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep2.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep3.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/KnowledgeQuestionSFHWP_Step3.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep4.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/KnowledgeQuestionSFHWP_Step4.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep5.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep6.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep7.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep8.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/KnowledgeQuestionSFHWP_Step8.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep9.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep10.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep12.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep13.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep13B.ts" />
/// <reference path="./scenes/ChilledWaterSystem/SingleHotWaterPumpFailure/SingleFailureHotWaterPumpStep14.ts" />


class Controller extends Phaser.Scene {
    constructor() {
        super({ key: "Controller"});
    }

    create() {
        Sim.loader.style.visibility = 'visible';
    }

    preload() {

    }
}

// Kick-off Sim initialization
window.addEventListener("DOMContentLoaded", function() {
    let elem: HTMLDivElement = document.querySelector(".content");
    let lesson = Helper.getQueryString('lesson', document.location.href) || "";
    let scenes = [];
    let resources = [];
    
    switch (lesson) {
        case "":
            scenes = [Controller];
            break;
        case "IntroPowerSystem":
            scenes = [
                Controller,
                IntroPowerSystem,
                BuildingFloorPlan,
                InputModuleAB,
                InputTransformers,
                StaticFrequencyConverters,
                OutputTransformers,
                Deckhouse,
                RDH
            ];

            resources = [
                "../public/audio/introAudio.mp3",
                "../public/images/AA_Building_Landscape-000.png",
                "../public/images/AA_Building_Landscape-100.png",
                "../public/images/AA_Facility_Romania_Floorplan_Electrical_Rooms.png",
                "../public/images/AA_Facility_Romania_floorplan.png",
                "../public/images/AA_landscape-wide.png",
                "../public/images/cnv.png",
                "../public/images/cnv_60.png",
                "../public/images/dhsb_a.png",
                "../public/images/dhsb_a_module.png",
                "../public/images/dhsb_b.png",
                "../public/images/dhsb_low_volt.png",
                "../public/images/f13_f14.png",
                "../public/images/f21_f23.png",
                "../public/images/input_a.png",
                "../public/images/input_a_highlighted.png",
                "../public/images/input_b.png",
                "../public/images/input_b_highlighted.png",
                "../public/images/input_transformer.png",
                "../public/images/launcher_module_enclosure.png",
                "../public/images/lsue.png",
                "../public/images/lsue_line_fix.png",
                "../public/images/output_transformer.png",
                "../public/images/rdh.png",
                "../public/images/rdh.png",
                "../public/images/sky-background.png",
                "../public/images/switch_gears_center.png",
                "../public/images/switch_gears_left.png",
                "../public/images/ucc_final_frame_deckhouse_feed.png",
                "../public/images/ucc_final_frame_input_transformers.png",
                "../public/images/ucc_final_frame_output_transformer.png",
                "../public/images/ucc_final_frame_start.png",
                "../public/images/ucc_final_rdh_frame.png",
                "../public/images/ucc_static_converter_final_frame.png",
                "../public/video/aaBuildingLandscape.mp4",
                "../public/video/uccConsoleZoom.mp4"
            ];
            
            Sim.threshHold = {
                start: 1,
                end: 8
            };
            break;
        case "FullUtilityIntro":
            scenes = [
                Controller,
                FullUtilityIntro,
                CriticalSystemSupport,
                SpyRadar,
                VerticalLaunchingSystem,
                VLSIntercept,
                MVS,
                MVSChallenge,
                MainBus,
                MainBusChallengeA,
                MainBusChallengeB,
                PrimaryBusBreakers,
                GenTieBreakerChallenge,
                DieselGenerators,
                FullUtilityEnd
            ];

            resources = [
                "../public/audio/fullUtilityAudio.mp3",
                "../public/images/A-B-flipped.png",
                "../public/images/A-B-grayed.png",
                "../public/images/a_side_open.png",
                "../public/images/b-primary-bus.png",
                "../public/images/b_side_open.png",
                "../public/images/m11Breaker.png",
                "../public/images/m21Breaker.png",
                "../public/images/manual_auto_flipped.png",
                "../public/images/ucc_final_frame.png",
                "../public/video/UCC_Console_Zoom_Start.mp4",
                "../public/video/satSystems.mp4",
                "../public/video/vlsIntercept.mp4"
            ];

            Sim.threshHold = {
                start: 1,
                end: 14
            };
            break;
        case "SingleUtililtyFailureIntro":
            scenes = [
                Controller,
                SingleUtililtyFailureIntro,
                UtilityADetail,
                FiftySixtyConverter,
                CSOOW,
                UCCMainFaulted,
                KnowledgeQuestion1,
                M11T21Verify,
                Deenergized5060Converter,
                LocateManual,
                StartSFCDetail,
                ASideRestarted,
                TransferSourceConclusion
            ];

            resources = [
                "../public/audio/Challenge_Questions_02.mp3",
                "../public/audio/Challenge_Questions_ALT_LINE_01.mp3",
                "../public/audio/Four_Hundred_Hz_Challenge_Questions.mp3",
                "../public/audio/fullUtilityAudio.mp3",
                "../public/audio/singleUtilityFiftySixtyAudio.mp3",
                "../public/images/50_60Hz_Static_Frequency_Converter_Large.png",
                "../public/images/UCC_Console_Zoom_T21_Open_end.png",
                "../public/images/UCC_Console_Zoom_T21_Open_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Critical_Condition_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Critical_Condition_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Critical_Condition_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Critical_Condition_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Critical_Condition_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged_start.png",
                "../public/images/start_sfc.png", "../public/images/start_sfc_button.png",
                "../public/images/transfer_dialog.png", "../public/images/uccMainFaulted.png",
                "../public/images/ucc_console_powered_zoom_end.png",
                "../public/video/UCC_Console_Zoom_T21_Open.mp4",
                "../public/video/UCC_Monitor_Pan_Center_to_Left_60Hz_Unacknowledged.mp4",
                "../public/video/UCC_Monitor_Pan_Center_to_Left_T21_Open.mp4",
                "../public/video/UCC_Monitor_Pan_Left_to_Center_60Hz_Critical_Condition.mp4",
                "../public/video/UCC_Monitor_Pan_Left_to_Center_60Hz_Unacknowledged.mp4"
            ];

            Sim.threshHold = {
                start: 1,
                end: 12
            };

            break;
        case "DualUtilityFailureIntro":
            scenes = [
                Controller,
                DualUtilityFailureIntro,
                FiftySixtyConvertersFail,
                DualUtilityNotifyCSOOW,
                DualUtilityKnowledgeQuestion1,
                OpenBreakerVerification,
                AutomaticRunRequest,
                GeneratorBreakersClose,
                BreakerF11F21Closes,
                BreakerF12F22Closes,
                LocateABBManual,
                InitiateTransferToFullPower,
                DualUtilityFailureConclusion
            ];

            resources = [
                "../public/audio/Challenge_Questions_ALT_LINE_01.mp3",
                "../public/audio/Full_Loss_of_Utility_Power.mp3",
                "../public/audio/Full_Loss_of_Utility_Power_Challenge Questions.mp3",
                "../public/audio/dieselEngine.mp3", "../public/audio/fullUtilityAudio.mp3",
                "../public/audio/singleUtilityFiftySixtyAudio.mp3",
                "../public/images/CSOOW.png",
                "../public/images/Catepillar3516C_Diesel_Front_off.png",
                "../public/images/Catepillar3516C_Diesel_Front_on.png",
                "../public/images/Chief_Still.png",
                "../public/images/UCC_Console_Zoom_T21_Open_end.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_Two_Gens_Powered.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_F12_F22_closed.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_f11_closed.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_f11_open.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_f21_closed.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_first_gen_closed.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_first_gen_open.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_gbreakers_closed.png",
                "../public/images/UCC_Monitor_Pan_Center_to_Left_50Hz_Loss_start_t21_closed.png",
                "../public/images/to_util_button.png", "../public/images/transfer_dialog.png",
                "../public/video/UCC_Console_Zoom_Power_Loss_F11_open.mp4",
                "../public/video/UCC_Console_Zoom_T21_Open.mp4"
            ];

            Sim.threshHold = {
                start: 1,
                end: 12
            };
            break;
        case "IntroASideFailure":
            scenes = [
                Controller,
                IntroASideFailure,
                /* This is the d and d question that gives issues in IE */
                //SequencingKnowledgeQuestion,
                FourHundredDetailScreen,
                FourHundredFaultDetected,
                NotifyCSOOW,
                LocateHobartManual,
                SFCKnowledgeQuestion,
                HobartFaultReadOut,
                HobartFaultKnowledgeQuestion,
                FourHundredFaultCleared,
                FourHundredConclusion
            ];

            resources = [
                "../public/audio/Complete_Loss_of_400Hz_SFC_A_or_B_Side_Bus.mp3",
                "../public/audio/Four_Hundred_Hz_Challenge_Questions.mp3",
                "../public/audio/Four_Hundred_Hz_Sir_we_have_a_failure_take2.mp3",
                "../public/audio/Full_Loss_of_Utility_Power_Challenge Questions.mp3",
                "../public/audio/fullUtilityAudio.mp3",
                "../public/images/400Hz_udp_1_23_2_A.png",
                "../public/images/400Hz_udp_1_23_2_N.png",
                "../public/images/400Hz_udp_1_43_1_A.png",
                "../public/images/400Hz_udp_1_43_1_N.png",
                "../public/images/CSOOW.png",
                "../public/images/Chief_Still.png",
                "../public/images/Hobart400Hz_PowerMaster180kVA_Large_Front.png",
                "../public/images/Hobart400Hz_red_bulb.png",
                "../public/images/UCC_Console_Zoom_T21_Open_end.png",
                "../public/images/UCC_Console_Zoom_T21_Open_end_rdh_highlighted.png",
                "../public/images/UCC_Monitor_Pan-400Hz_Center_to_Left_T21_Open_end_sfc_highlighted.png",
                "../public/images/UCC_Monitor_Pan-400Hz_Left_to_Center_Unacknowledged_start.png",
                "../public/images/UCC_Monitor_Pan_400Hz_Center_to_Left_T21_Open_end.png",
                "../public/images/error_code_0150.png",
                "../public/images/hobart_zoomed_in.png",
                "../public/video/UCC_Console_Zoom_T21_Open.mp4",
                "../public/video/UCC_Monitor_Pan_400Hz_Center_to_Left_T21_Open.mp4",
                "../public/video/UCC_Monitor_Pan_400Hz_Left_to_Center_T21_Open.mp4"
            ];

            Sim.threshHold = {
                start: 1,
                end: 10
            };
            break;

        case "WaterChillerIntro":
            scenes = [
                Controller,
                WaterChillerIntro,
                CrucialSystemSupport,
                WaterChillerScene2,
                WaterChillerScene3,
                ChilledWaterKnowledgeCheckScene3,
                WaterChillerScene4,
                WaterChillerScene5,
                ChilledWaterKnowledgeCheckScene5,
                WaterChillerScene6,
                ChilledWaterKnowledgeCheckScene6,
                WaterChillerScene7,
                WaterChillerScene8,
                WaterChillerScene9,
                WaterChillerScene10,
            ];

            resources = [
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-01.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-02.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-03.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-04.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-05.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-06.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-07.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-08.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-09.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-10.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-11.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Scenario_01-Challenge_Questions.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Sco_1_Scene_3_KC.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Sco_1_Scene_5_KC.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Sco_1_Scene_6_KC.mp3",
                "../public/audio/Chilled_Water_System/Scenario_01/Sco_1_Scene_9_KC.mp3",
                "../public/audio/TryAgain.mp3",
                "../public/audio/Correct.mp3",
                //"../public/images/",
                "../public/video/UCC_Monitor_Pan-Right_to_Center_Normal_System_Operations.mp4",
                "../public/video/UCC_Monitor_Pan-left_to_Right_Normal_System_Operations.mp4",
                "../public/video/UCC_Monitor_Pan-left_to_Center_Normal_System_Operations.mp4",
                "../public/video/UCC_Monitor_Pan-Center_to_Left_Normal_System_Operations.mp4",
                "../public/video/UCC_Console_Zoom_Normal_System_Operations.mp4",
            ];

            Sim.threshHold = {
                start: 1,
                end: scenes.length - 1
            };
        break;

        case "SingleSystemFailureIntro":
            scenes = [
                Controller,
                SingleSystemFailureIntro,
                SingleSystemFailureScene1,
                SingleSystemFailureScene2,
                SingleSystemFailureScene3,
                SingleSystemFailureScene4,
                SingleSystemFailureScene4KnowledgeCheck,
                SingleSystemFailureScene5,
                SingleSystemFailureScene5KnowledgeCheck,
                SingleSystemFailureScene6,
                SingleSystemFailureScene6KnowledgeCheck,
                SingleSystemFailureScene7,
                SingleSystemFailureScene7KnowledgeCheck,
                SingleSystemFailureScene8,
                SingleSystemFailureScene10,
                SingleSystemFailureScene11,
                SingleSystemFailureScene12,
            ];
            resources = [
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-01.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-02.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-03.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-04.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-05.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-06.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-07.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-08.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-09.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-10.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-11.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-11a.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-11b.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-12.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-13.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scenario_02-Challenge_Questions.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scene4.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scene5.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scene6.mp3",
                "../public/audio/Chilled_Water_System/Scenario_02/Scene7.mp3",
                //"../public/images/",
                "../public/audio/TryAgain.mp3",
                "../public/audio/Correct.mp3",
                //Videos
                "../public/video/UCC_Console_Zoom_Normal_System_Operations.mp4",
                "../public/video/UCC_Monitor_Pan-Center_to_Left_Single_Sys_Failure_CWS.mp4",
                "../public/video/UCC_Monitor_Pan-Left_to_Center_Single_Sys_Failure_CWS.mp4",
                "../public/video/UCC_Monitor_Pan-Center_to_Left_Single_Sys_Failure_CWS_Low_Pressure.mp4",
                "../public/video/UCC_Monitor_Pan-Center_to_Left_Single_Sys_Failure_CWS_Hi_Temp.mp4",
                "../public/video/UCC_Monitor_Pan-Left_to_Center_Single_Sys_Failure_CWS_Low_Pressure.mp4",
                "../public/video/UCC_Monitor_Pan-Left_to_Center_Single_Sys_Failure_CWS_High_Temp.mp4",
            ];

            Sim.threshHold = {
                start: 1,
                end: scenes.length - 1
            }
            break;

        case "FailureChilledWaterPumpIntro":
            scenes = [
                Controller,
                FailureChilledWaterPumpIntro,
                FailureChilledWaterPumpStep1,
                FailureChilledWaterPumpStep2,
                FailureChilledWaterPumpStep3,
                FailureChilledWaterPumpStep4,
                FailureChilledWaterPumpStep5,
                KnowledgeQuestionStep5,
                FailureChilledWaterPumpStep6,
                KnowledgeQuestionStep6,
                FailureChilledWaterPumpStep7,
                KnowledgeQuestionStep7,
                FailureChilledWaterPumpStep8,
                FailureChilledWaterPumpStep10,
                FailureChilledWaterPumpStep11,
                FailureChilledWaterPumpStep12,
                FailureChilledWaterPumpStep12B,
                FailureChilledWaterPumpStep13
            ];

            resources = [
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-01.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-02.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-03.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-04-with_AlarmSound.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-05.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-06.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-07.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-08.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-10.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-11.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-12.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-13.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-14.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03-15.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03_Step2_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03_Step5_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03_Step6_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03_Step7_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_03/Scenario_03_Step12_CQ.mp3",
                "../public/audio/TryAgain.mp3",
                "../public/audio/Correct.mp3",
                "../public/images/ChilledWaterSummer.png",
                "../public/images/ChilledWaterWinter.png",
                "../public/images/ChilledWaterWinterB.png",
                "../public/images/ChilledWaterWinterB_flow1.png",
                "../public/images/ChilledWaterWinterB_flow2.png",
                "../public/images/AA_Building_Landscape-000.png",
                "../public/images/Chilled_Water_Return_Pump_Run_Fail_LI.png",
                "../public/images/ChilledWaterWinterB_ReturnPumpFailure.png",
                "../public/images/ChilledWaterReturnPumpsUnavailable.png",
                "../public/images/ChilledWaterReturnPumpsUnavailable2.png",
                "../public/images/ChilledWaterReturnPumpAlarmCode.png",
                "../public/images/ChilledWaterReturnPumpAlarmCode2.png",
                "../public/images/CSOOW.png",
                "../public/images/Chief_Still.png",
                "../public/images/References_Menu_With_GrundfosMotorsPDF_wArrows.png",
                "../public/images/ChilledWaterWinterB_ReturnPumpFailure2.png",
                "../public/images/ChilledWaterSummerStart.png",
                "../public/images/ChilledWaterUnitReset.png",
                "../public/images/ChilledWaterChillerPriority.png",
                "../public/images/ChilledWaterSummerFinished.png",
                "../public/video/UCC_Console_Zoom_Return_Sys_Pump_Failure.mp4",
            ];

            Sim.threshHold = {
                start: 1,
                end: 17
            };
            break;

        case "SingleFailureHotWaterPumpIntro":

            scenes = [
                Controller,
                SingleFailureHotWaterPumpIntro,
                SingleFailureHotWaterPumpStep1,
                SingleFailureHotWaterPumpStep2,
                SingleFailureHotWaterPumpStep3,
                KnowledgeQuestionSFHWP_Step3,
                SingleFailureHotWaterPumpStep4,
                KnowledgeQuestionSFHWP_Step4,
                SingleFailureHotWaterPumpStep5,
                SingleFailureHotWaterPumpStep6,
                SingleFailureHotWaterPumpStep7,
                SingleFailureHotWaterPumpStep8,
                KnowledgeQuestionSFHWP_Step8,
                SingleFailureHotWaterPumpStep9,
                SingleFailureHotWaterPumpStep10,
                SingleFailureHotWaterPumpStep12,
                SingleFailureHotWaterPumpStep13,
                SingleFailureHotWaterPumpStep13B,
                SingleFailureHotWaterPumpStep14,
            ];

            resources = [
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-01.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-02.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-03.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-04.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-05.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-06.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-07.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-08.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-09.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-10.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-11.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-11a.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-12.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-13.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04-14.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04_Step3_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04_Step4_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04_Step7_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04_Step8_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04_Step13a_CQ.mp3",
                "../public/audio/Chilled_Water_System/Scenario_04/Scenario_04_Step13b_CQ.mp3",
                "../public/audio/TryAgain.mp3",
                "../public/audio/Correct.mp3",
                "../public/images/UCC_Console_Zoom_Single_Failure_HW_Pump_end.png",
                "../public/images/UCC_Monitor_Pan-Center_to_Left_Single_Failure_HW_Pump_end.png",
                "../public/images/UCC_Monitor_Pan-Center_to_Left_Single_Failure_HW_Pump_end3.png",
                "../public/images/UCC_Monitor_Pan-Center_to_Right_Single_Failure_HW_Pump_end.png",
                "../public/images/UCC_Monitor_Pan-Center_to_Right_Single_Failure_HW_Pump_end2.png",
                "../public/images/HW_EndFrame.png",
                "../public/images/HW_EndFrame_darkTRBL.png",
                "../public/images/CSOOW.png",
                "../public/images/Chief_Still.png",
                "../public/images/References_Menu_With_GrundfosMotorsPDF_wArrows.png",
                "../public/images/HW_Set_Lead_Lead_Select_Popup.png",
                "../public/images/HW_Set_Lead_Unit_Reset_Popup.png",
                "../public/images/Hot_Water_System.png",
                "../public/images/HW_Set_Lead.png",
                "../public/video/UCC_Console_Zoom_Single_Failure_HW_Pump.mp4",
                "../public/video/UCC_Monitor_Pan-Center_to_Left_Single_Failure_HW_Pump.mp4",
                "../public/video/UCC_Monitor_Pan-Left_to_Center_Single_Failure_HW_Pump.mp4",
                "../public/video/UCC_Monitor_Pan-Center_to_Right_Single_Failure_HW_Pump.mp4",
                "../public/video/AA_Missile_Attack.mp4",
                "../public/video/AA_Facilities_Gas.mp4",
                "../public/video/UCC_Monitor_Pan-Right_to_Center_Single_Failure_HW_Pump.mp4",
            ];

            Sim.threshHold = {
                start: 1,
                end: 18
            };
            break;
    }

    //WE ONLY NEED TO SETUP SIM.THRESHOLD ONCE here.....
    /* Sim.threshHold = {
        start: 1,
        end: scenes.length - 1
    } */

    // Set Phaser configuration properties based on content div element
    let config = {
        type: Phaser.CANVAS,
        width: elem.offsetWidth,
        height: elem.offsetHeight,
        parent: elem,
        scene: scenes
    } as Config;

    Sim.loader = document.querySelector(".loading");
    Sim.output = parent.document.querySelector('.output');
    
    if (window.location.href.indexOf('localhost') == -1) {
        if (parent.parent["doLMSGetValue"]("cmi.entry") == "ab-initio") {
            parent.parent["doLMSSetValue"]("cmi.location", lesson);
            loadSim();
        }
        else {
            let bookmark = null;

            if (parent.parent["doLMSGetValue"]("cmi.entry") == "") {
                bookmark = lesson;
                loadSim();
            }
            else {
                if (parent.parent["doLMSGetValue"]("cmi.completion_status") != "completed") {
                    setTimeout(() => {
                        bookmark = parent.parent['doLMSGetValue']("cmi.location");
            
                        if (bookmark != "") {
                            lesson = bookmark;
                        }

                        loadSim();
                    }, 1000);
                }
                else {
                    loadSim();
                }
            }
        }
    } else {
        loadSim();
    }

    function loadSim() {
        if (resources.length > 0) {
            let loader = new Loader();
            
            loader.load(resources, () => {
                Sim.game = new Phaser.Game(config);
                Sim.game.scene.start(lesson);
            }, this);
        } else {
            Sim.game = new Phaser.Game(config);
        }
    }
});